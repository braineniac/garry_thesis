\documentclass[class=article, crop=false]{standalone}
%\usepackage[subpreambles=true]{standalone}
\usepackage{import}
%\input{../packages}
\begin{document}
\pgfplotsset{width=14cm,compat=1.9}
\section{Beta tuning}\label{sec:betatune}

We already set our $\alpha$ parameter in the \ref{sec:alphatune}, so we use that for our next experiments. But since we only track the $\Psi$ and $\dot{\Psi}$ states, the $\alpha$ parameter doesn't influence the results.

\subsection{Reference}

When tuning our $\beta$ parameter, we have to be concious also about our $\varrho^{\eta\chi}$, since the physical dimension of our $u_\eta $ input and $y_\chi$ output are the same. This means that the "trust" we place on one of them directly effects our $\dot{\Psi}$ state.

Due to the physical setup of our robot, there is a strong non-linear correlation between our input signal and the turn speed. Once the input signal is high, the motors turn one wheel in forward and the other one in the opposite direction that would ideally create a constant turn speed.

But since the motors move only after a certain threshold, where they overcome sticktion, this turn speed is relatively high, we turn in short bursts. The motors need an acceleration period before they reach their tops speed and because of the short input bursts, the turn speed is non-linear, which means that we can't "trust" our $u^\eta$ and should rely mostly on our gyroscope measurement $y^\chi$ on the IMU.

To achieve the best accuracy, we have to tune in two parameters. $\varrho^{\eta\chi}$ should be relatively high and our $\beta$ should scale our $u^\eta$ into the a similar value as $y^\chi$, but the the $\Psi$ and $\dot{\Psi}$ should be largely independant of $\beta$.

In our reference experiment we turn 5 times and see if with our set $\beta$ and $\varrho_{\eta\chi}$ the turns are there in the $\Psi$ state.

\vspace{0.5cm}

\begin{figure}[H]
\begin{flushleft}
  \begin{tikzpicture}
    \begin{axis}[
      yticklabel style={
        /pgf/number format/fixed,
        /pgf/number format/precision=5
      },
      xmin=0,
      xmax=46,
      width=12cm,
      height=5cm,
      xtick distance=5,
      ytick distance=0.04,
      xlabel={Time $[s]$},
      ylabel={$ u^\eta_k$ $[m/s]$},
      grid=both,
      grid style={
        line width=.1pt,
        draw=gray!10},
        major grid style={
          line width=.2pt,
          draw=gray!50
        },
      ]
      \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_0_u1.csv};
    \end{axis}
  \end{tikzpicture}
\end{flushleft}

\begin{flushleft}
  \begin{tikzpicture}
    \begin{axis}[
      yticklabel style={
        /pgf/number format/fixed,
        /pgf/number format/precision=5
      },
      width=12cm,
      height=5cm,
      xmin=0,
      xmax=46,
      xtick distance=5,
      ytick distance=0.5,
      xlabel={Time $[s]$},
      ylabel={$ y^\chi_k$ $[m/s^2] $},
      grid=both,
      grid style={
        line width=.1pt,
        draw=gray!10},
        major grid style={
          line width=.2pt,
          draw=gray!50
        },
      ]
      \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_0_y1.csv};
    \end{axis}
  \end{tikzpicture}
\end{flushleft}
\caption{$ \textbf{u}_k $ and $ \textbf{y}_k $ of the beta tuning reference experiment}\label{fig:betas_io}
\end{figure}

\vspace{0.5cm}

\begin{figure}[H]
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xmin=-5,
     xmax=46,
     domain=0:46,
     xtick distance=5,
     ytick distance=1,
     xlabel={Time $[s]$},
     ylabel={$\Psi $ state [rad]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
      domain=0:46,
    ]
    \addplot+[color=teal, mark=none,line width=1pt,mark size=1pt] table {plots/betas_4_x3.csv};
    \addlegendentry{6.6}
    \addplot+[color=violet, mark=none,line width=1pt,mark size=1pt] table {plots/betas_3_x3.csv};
    \addlegendentry{7.0}
    \addplot+[color=black, mark=none,line width=1pt,mark size=1pt] table {plots/betas_2_x3.csv};
    \addlegendentry{7.4}
    \addplot+[color=red, mark=none,line width=1pt,mark size=1pt] table {plots/betas_1_x3.csv};
    \addlegendentry{7.8}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/betas_0_x3.csv};
    \addlegendentry{8.2}
    \addplot+[color=gray, mark=none,line width=1pt,mark size=1pt, samples=2, dashed] {0.0};
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=0.5,
     xmax=46,
     xmin=-5,
     domain=0:46,
     xlabel={Time $[s]$},
     ylabel={$\dot{\Psi}$ state [rad/s]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=teal, mark=none,line width=1pt,mark size=1pt] table {plots/betas_4_x4.csv};
    \addlegendentry{6.6}
    \addplot+[color=violet, mark=none,line width=1pt,mark size=1pt] table {plots/betas_3_x4.csv};
    \addlegendentry{7.0}
    \addplot+[color=black, mark=none,line width=1pt,mark size=1pt] table {plots/betas_2_x4.csv};
    \addlegendentry{7.4}
    \addplot+[color=red, mark=none,line width=1pt,mark size=1pt] table {plots/betas_1_x4.csv};
    \addlegendentry{7.8}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/betas_0_x4.csv};
    \addlegendentry{8.2}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \caption{Different $\beta$-s influence on the $\Psi$ and $\dot{\Psi}$ state in the reference experiment}\label{fig:betas}
\end{figure}

\vspace{0.5cm}

\begin{figure}[H]
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=1,
     xmax=46,
     xmin=-5,
     domain=0:46,
     xlabel={Time $[s]$},
     ylabel={$\Psi$ state [rad]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=teal, mark=none,line width=1pt,mark size=1pt] table {plots/r2_ratios_0_x3.csv};
    \addlegendentry{0.01}
    \addplot+[color=violet, mark=none,line width=1pt,mark size=1pt] table {plots/r2_ratios_1_x3.csv};
    \addlegendentry{0.1}
    \addplot+[color=black, mark=none,line width=1pt,mark size=1pt] table {plots/r2_ratios_2_x3.csv};
    \addlegendentry{1}
    \addplot+[color=red, mark=none,line width=1pt,mark size=1pt] table {plots/r2_ratios_3_x3.csv};
    \addlegendentry{10}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/r2_ratios_4_x3.csv};
    \addlegendentry{100}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xmax=46,
     xmin=-5,
     domain=0:46,
     xtick distance=5,
     ytick distance=0.5,
     xlabel={Time $[s]$},
     ylabel={$\dot{\Psi}$ state [rad/s]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=teal, mark=none,line width=1pt,mark size=1pt] table {plots/r2_ratios_0_x4.csv};
    \addlegendentry{0.01}
    \addplot+[color=violet, mark=none,line width=1pt,mark size=1pt] table {plots/r2_ratios_1_x4.csv};
    \addlegendentry{0.1}
    \addplot+[color=black, mark=none,line width=1pt,mark size=1pt] table {plots/r2_ratios_2_x4.csv};
    \addlegendentry{1}
    \addplot+[color=red, mark=none,line width=1pt,mark size=1pt] table {plots/r2_ratios_3_x4.csv};
    \addlegendentry{10}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/r2_ratios_4_x4.csv};
    \addlegendentry{100}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \caption{Different $\varrho_{\eta\chi}$-s influence on the $\Psi$ and $\dot{\Psi}$ state in the reference experiment}\label{fig:betaratios}
\end{figure}

\vspace{0.5cm}

This is what we see in Figure \ref{fig:betas} in our 5 turns reference experiment. We set the ratio to $\varrho^{\eta\chi} = 10$, so even bigger changes in beta have almost no impact on the $\Psi$ and $\dot{\Psi}$. In Figure \ref{fig:betaratios} we can observe what happens if the ratio changes. We sticked to $\beta = 7.4$ during the rest of the experiments.

\subsection{Testing}\label{subsec:betatesting}

We do a similar testing approach as in Section \ref{subsec:alphatesting} and do an experiment where we turn 5 times without stopping and where we turn 10 times.

\begin{center}
\begin{figure}[H]
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=1,
     xmax=48,
     xmin=-10,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\Psi$ state [rad]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, mark=none,line width=1pt,mark size=1pt, dashed] table {plots/beta_0_x3.csv};
    \addlegendentry{reference}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_single_0_x3.csv};
    \addlegendentry{few stops}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xmax=48,
     xmin=-10,
     domain=0:48,
     xtick distance=5,
     ytick distance=0.5,
     xlabel={Time $[s]$},
     ylabel={$\dot{\Psi}$ state [rad/s]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red,dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_0_x4.csv};
    \addlegendentry{reference}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_single_0_x4.csv};
    \addlegendentry{few stops}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \caption{Turning 5 times with no stops compared to reference using a Kalman Filter}\label{fig:betasingle}
\end{figure}
\end{center}

\vspace{0.5cm}

\begin{center}
\begin{figure}[H]
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=1,
     xmin=-10,
     xmax=48,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\Psi$ state [rad]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_0_x3.csv};
    \addlegendentry{reference}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_multi_0_x3.csv};
    \addlegendentry{10 turns}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=0.5,
     xmin=-10,
     xmax=48,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\dot{\Psi}$ state [rad/s]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_0_x4.csv};
    \addlegendentry{reference}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_multi_0_x4.csv};
    \addlegendentry{10 turns}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \caption{Turning 10 times compared to reference using a Kalman Filter}\label{fig:betamulti}
\end{figure}
\end{center}

Now let's repeat the experiments with the adaptive Kalman Filter.

\begin{center}
\begin{figure}[H]
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=1,
     xmax=48,
     xmin=-10,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\Psi$ state [rad]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, mark=none,line width=1pt,mark size=1pt, dashed] table {plots/beta_0_x3.csv};
    \addlegendentry{reference}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_adapt_0_x3.csv};
    \addlegendentry{adaptive}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xmax=48,
     xmin=-10,
     domain=0:48,
     xtick distance=5,
     ytick distance=0.5,
     xlabel={Time $[s]$},
     ylabel={$\dot{\Psi}$ state [rad/s]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red,dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_0_x4.csv};
    \addlegendentry{reference}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_adapt_0_x4.csv};
    \addlegendentry{adaptive}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \caption{Reference experiment using the adaptive Kalman Filter}\label{fig:adaptbeta}
\end{figure}
\end{center}

\begin{center}
\begin{figure}[H]
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=1,
     xmax=48,
     xmin=-10,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\Psi$ state [rad]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, mark=none,line width=1pt,mark size=1pt, dashed] table {plots/beta_single_0_x3.csv};
    \addlegendentry{reference}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_single_adapt_0_x3.csv};
    \addlegendentry{adaptive}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xmax=48,
     xmin=-10,
     domain=0:48,
     xtick distance=5,
     ytick distance=0.5,
     xlabel={Time $[s]$},
     ylabel={$\dot{\Psi}$ state [rad/s]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red,dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_single_0_x4.csv};
    \addlegendentry{reference}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_single_adapt_0_x4.csv};
    \addlegendentry{adaptive}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \caption{Turning 5 times with no stops using the adaptive Kalman Filter}\label{fig:adaptbetasingle}
\end{figure}
\end{center}

\begin{center}
\begin{figure}[H]
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=1,
     xmin=-10,
     xmax=48,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\Psi$ state [rad]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_multi_0_x3.csv};
    \addlegendentry{reference}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_multi_adapt_0_x3.csv};
    \addlegendentry{adaptive}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=0.5,
     xmin=-10,
     xmax=48,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\dot{\Psi}$ state [rad/s]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_multi_0_x4.csv};
    \addlegendentry{reference}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_multi_adapt_0_x4.csv};
    \addlegendentry{adaptive}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \caption{Turning 10 times using the adaptive Kalman Filter}\label{fig:adaptbetamulti}
\end{figure}
\end{center}

We can see from Figures \ref{fig:adaptbeta}, \ref{fig:adaptbetasingle} and \ref{fig:adaptbetamulti} that the adaptive Kalman Filter barely effects the state estimations.

Next, let's run the same experiments with the Extended Kalman Filter.

\begin{center}
\begin{figure}[H]
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=1,
     xmax=48,
     xmin=-10,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\Psi$ state [rad]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, mark=none,line width=1pt,mark size=1pt, dashed] table {plots/beta_adapt_0_x3.csv};
    \addlegendentry{adaptive}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_ekf_0_x3.csv};
    \addlegendentry{EKF}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xmax=48,
     xmin=-10,
     domain=0:48,
     xtick distance=5,
     ytick distance=0.5,
     xlabel={Time $[s]$},
     ylabel={$\dot{\Psi}$ state [rad/s]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red,dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_adapt_0_x4.csv};
    \addlegendentry{adaptive}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_ekf_0_x4.csv};
    \addlegendentry{EKF}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \caption{Reference experiment using the Extended Kalman Filter}\label{fig:ekfbeta}
\end{figure}
\end{center}

\vspace{0.5cm}

\begin{center}
\begin{figure}[H]
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=1,
     xmin=-10,
     xmax=48,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\Psi$ state [rad]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_single_adapt_0_x3.csv};
    \addlegendentry{adaptive}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_single_ekf_0_x3.csv};
    \addlegendentry{EKF}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=0.5,
     xmin=-10,
     xmax=48,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\dot{\Psi}$ state [rad/s]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_single_adapt_0_x4.csv};
    \addlegendentry{adaptive}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_single_ekf_0_x4.csv};
    \addlegendentry{EKF}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \caption{Turning 5 times with no stops using the Extended Kalman Filter}\label{fig:ekfbetasingle}
\end{figure}
\end{center}

\vspace{0.5cm}

\begin{center}
\begin{figure}[H]
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=1,
     xmin=-10,
     xmax=48,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\Psi$ state [rad]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_multi_adapt_0_x3.csv};
    \addlegendentry{adaptive}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_multi_ekf_0_x3.csv};
    \addlegendentry{EKF}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \begin{flushleft}
  \begin{tikzpicture}
   \begin{axis}[
     yticklabel style={
       /pgf/number format/fixed,
       /pgf/number format/precision=5
      },
     width=12cm,
     height=5cm,
     xtick distance=5,
     ytick distance=0.5,
     xmin=-10,
     xmax=48,
     domain=0:48,
     xlabel={Time $[s]$},
     ylabel={$\dot{\Psi}$ state [rad/s]},
     legend pos=north west,
     grid=both,
     grid style={
       line width=.1pt,
       draw=gray!10},
     major grid style={
       line width=.2pt,
       draw=gray!50
      },
    ]
    \addplot+[color=red, dashed, mark=none,line width=1pt,mark size=1pt] table {plots/beta_multi_adapt_0_x4.csv};
    \addlegendentry{adaptive}
    \addplot+[color=blue, mark=none,line width=1pt,mark size=1pt] table {plots/beta_multi_ekf_0_x4.csv};
    \addlegendentry{EKF}
   \end{axis}
  \end{tikzpicture}
 \end{flushleft}
 \caption{Turning 10 times with no stops using the Extended Kalman Filter}\label{fig:ekfbetamulti}
\end{figure}
\end{center}

We can observe from the EKF experiments in Figures \ref{fig:ekfbeta}, \ref{fig:ekfbetasingle} and \ref{fig:ekfbetamulti} that there are some differences in the state estimations. We will have to do different tests to determine if the accuracy is actually better than with our adaptive Kalman Filter or not.

\end{document}
